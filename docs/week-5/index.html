<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Week 5: Introduction to Testing</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/devops_2022_2023_notes/assets/css/0.styles.053b07ab.css" as="style"><link rel="preload" href="/devops_2022_2023_notes/assets/js/app.385aff99.js" as="script"><link rel="preload" href="/devops_2022_2023_notes/assets/js/2.df6d3794.js" as="script"><link rel="preload" href="/devops_2022_2023_notes/assets/js/7.d6d14512.js" as="script"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/10.7dcc5945.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/11.44b47319.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/12.d66d6fe4.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/13.39345f08.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/14.79336934.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/15.61e71226.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/16.18bdaae7.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/17.d545aba4.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/18.6aa589be.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/19.67034eec.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/20.0a41b244.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/21.18eb8a46.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/22.fe643793.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/23.4dc7ba8b.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/24.1f88b122.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/25.52213588.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/26.aef5f34c.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/27.693fb95f.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/28.4beb6599.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/29.d11db55c.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/3.716870f2.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/30.8132762d.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/31.5368a8e6.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/32.9fcb4892.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/33.67160554.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/34.8f18cbca.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/35.acf052e0.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/36.5b1193a4.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/37.666802d1.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/38.93e10668.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/39.c48c14eb.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/4.ef480ce9.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/40.b9b6d5ed.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/5.74d4f9a6.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/6.a6e25076.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/8.6f2f913f.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/9.98c65346.js">
    <link rel="stylesheet" href="/devops_2022_2023_notes/assets/css/0.styles.053b07ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/devops_2022_2023_notes/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Module Overview</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/devops_2022_2023_notes/" aria-current="page" class="sidebar-link">Module Introduction (Start Here ‚ñ∂Ô∏è)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Assessments</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/devops_2022_2023_notes/assessment/" class="sidebar-link">Assessment Overview</a></li><li><a href="/devops_2022_2023_notes/assessment/scenario.html" class="sidebar-link">Assessment Scenario</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Side Tutorials</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 1: Introduction to DevOps</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 2: Static Code Analysis (1)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 3: Static Code Analysis (2)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 4: Component Driven Development</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Week 5: Testing</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/devops_2022_2023_notes/week-5/lecture.html" class="sidebar-link">Lecture</a></li><li><a href="/devops_2022_2023_notes/week-5/" aria-current="page" class="active sidebar-link">Week 5: Introduction to Testing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-5/#lesson-dependencies-üî®" class="sidebar-link">Lesson Dependencies üî®</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-5/#task-0-get-the-starter-application" class="sidebar-link">TASK 0: Get the Starter Application</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-5/#defining-testing" class="sidebar-link">Defining Testing</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-5/#automated-testing" class="sidebar-link">Automated Testing</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-5/#we-need-a-different-approach" class="sidebar-link">We Need a Different Approach</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-5/#introducing-cypress" class="sidebar-link">Introducing Cypress</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-5/#task-1-installing-cypress" class="sidebar-link">Task 1: Installing Cypress</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-5/#task-2-testing-our-home-page" class="sidebar-link">Task 2: Testing Our Home Page</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-5/#task-3-adding-custom-cypress-commands" class="sidebar-link">Task 3: Adding Custom Cypress Commands</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-5/#task-4-testing-new-functionality" class="sidebar-link">Task 4: Testing new functionality</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-5/#further-reading" class="sidebar-link">Further Reading</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 6: Database Testing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 7: Authentication Testing Strategies and Deployment</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 8: CD Strategies</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Week 9: Unit Testing</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/devops_2022_2023_notes/week-9/" class="sidebar-link">Week 9: Unit Testing</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 10: Monitoring and Logging</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 11: Module Wrap Up (assessment support)</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="week-5-introduction-to-testing"><a href="#week-5-introduction-to-testing" class="header-anchor">#</a> Week 5: Introduction to Testing</h1> <p><img src="/devops_2022_2023_notes/assets/img/ci-pipeline_testing.9d56bbce.png" alt=""></p> <p>Welcome Welcome to week five. This week promises to be interesting: we are going to be expanding our CI pipeline by beginning to add automated tests to our room finder application.</p> <p>Throughout this week, we will be addressing the following questions:</p> <ol><li>What is the purpose of software testing?</li> <li>How can I create user focused tests?</li> <li>How can I start to develop a testing strategy for my own applications?</li></ol> <h2 id="lesson-dependencies-üî®"><a href="#lesson-dependencies-üî®" class="header-anchor">#</a> Lesson Dependencies üî®</h2> <ul><li><a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" target="_blank" rel="noopener noreferrer">You will need to ensure you have the version control tool Git installed<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>You'll need to know the basic Git Commands (e.g., <code>checkout -b</code>, <code>push</code>, and <code>commit</code>)</li></ul></li> <li>While you can use any text editor for this session, I recommend that you install <a href="https://code.visualstudio.com/download" target="_blank" rel="noopener noreferrer">VS Code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>You will need access to a MongDB database.
<ul><li>You can install your own locally</li> <li>Use <a href="https://www.mongodb.com/atlas/database" target="_blank" rel="noopener noreferrer">AtlasDB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <h2 id="task-0-get-the-starter-application"><a href="#task-0-get-the-starter-application" class="header-anchor">#</a> TASK 0: Get the Starter Application</h2> <div class="custom-block warning"><p class="custom-block-title">TASK 0: Getting Started</p> <p>Since we now have a database, set up is a little more involved:</p> <p>In your command line shell, run:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> clone --branch week-5-starter-code https://github.com/joeappleton18/solent-room-finder.git solent-room-finder-week-5
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>Follow the instructions in the cloned project's <code>README.md</code> to set up your development version of the Solent Room Finder.</li></ul></div> <h2 id="defining-testing"><a href="#defining-testing" class="header-anchor">#</a> Defining Testing</h2> <div class="custom-block tip"><p class="custom-block-title">DEFINITION</p> <p>üìñ <strong>Testing</strong></p> <p>Testing is the process of validating that software performs to its intended specification.</p></div> <p>Testing done right gives us high confidence that the code we are putting into production works. Historically, this would have been a manual process. Before a release of a software product, an army of testers would run through manual test scripts, ensuring the latest changes have not broken anything. Overall, this is a slow, painful process.</p> <h2 id="automated-testing"><a href="#automated-testing" class="header-anchor">#</a> Automated Testing</h2> <p>While manual testing may be unavoidable, we can automate large portions of the testing lifecycle. Automated tests are usually written by programmers to validate their own code.</p> <p><img src="/devops_2022_2023_notes/assets/img/testing-pyramid.c45e8ca9.png" alt=""></p> <blockquote><blockquote><p>Mike Cohn's testing pyramid is, arguably, an oversimplification.</p></blockquote></blockquote> <p>Not all automated tests are the same; often, people will cite Mike Cohn's test pyramid in a bid to define the different types of testing:</p> <ol><li>Unit Tests</li> <li>Integration Tests</li> <li>User Interface Tests/Acceptance tests</li></ol> <p>According to the above Cohn:</p> <p><strong>Unit tests</strong> target small components of your system in isolation (e.g., our add room form). These tests are fast, and there should be lots of them. We can run them continuously in the background. Further, they can be easily added to our CD pipeline.</p> <p><strong>Integration tests</strong> target multiple components and ensure they work together; these are slightly slower than unit tests.</p> <p><strong>Acceptance Tests</strong> simulate, often using a browser robot, user interactions. According to Chon, these are slow and fragile. As such, we should not write many of these!</p> <p>I find the above definitions troublesome. First, it is too polarising, requiring us to define the difference between tests. Second, it relies on developers correctly isolating functionality to write unit tests. To do this, we often have to mimic the functionality of dependent components, a technique known as mocking. Mocking takes a lot of thought and may not precisely simulate the behaviour of the mocked service. Third, the functionality of applications changes rapidly. This means we may end up testing granular functionality that changes or is not needed.</p> <h2 id="we-need-a-different-approach"><a href="#we-need-a-different-approach" class="header-anchor">#</a> We Need a Different Approach</h2> <p>If our testing serves the purpose of putting code into production without disrupting customers, then time on mocking obscure functionality does not meet this goal. This is especially the case with our room tracking application: it's not business or mission-critical.</p> <p>I would argue for most UI-focused applications (like our room finder), we are better off starting with wider-reaching integration/acceptance tests. Also, where possible, we want to interact with real services (e.g., the database). This presents us with two clear advantages over the above testing pyramid:</p> <ol><li>We are testing from the perspective of a user, not a developer.</li> <li>While the tests are slow(ish) to run, they are quick to write. For most UI-focused applications, the enhanced realism of the tests is a trade-off worth making.</li></ol> <p>In summary, by taking an integration/acceptance testing-led approach, we are forced to think from the perspective of our users.</p> <h2 id="introducing-cypress"><a href="#introducing-cypress" class="header-anchor">#</a> Introducing Cypress</h2> <p>This week, we will consider how we can write automated acceptance/integration tests for our room-tracking application. We'll begin by testing the home page and then move to further develop and test the create room functionality. To do this we are going to be using the Cypress testing library.</p> <p>This week, we will consider how we can write automated acceptance/integration tests for our room-tracking application. We'll begin by testing the home page and then move to further develop and test the create room functionality. <a href="https://www.cypress.io/" target="_blank" rel="noopener noreferrer">To achieve this, we will be using the testing library, Cypress.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>According to the developers, &quot;Cypress enables you to write faster, easier and more reliable tests&quot;. While you can write all types of tests in Cypress, it's best know for acceptance testing (Acceptance testing is used interchangeable with <strong>End to End Testing</strong>). In summary, Cypress allows us to simulate user behavior by robotically controlling a browser.</p> <h2 id="task-1-installing-cypress"><a href="#task-1-installing-cypress" class="header-anchor">#</a> Task 1: Installing Cypress</h2> <p>In this task, we will set up Cypress.</p> <div class="custom-block warning"><p class="custom-block-title">TASK 1: Installing Cypress</p> <ul><li><a href="https://docs.cypress.io/guides/getting-started/installing-cypress" target="_blank" rel="noopener noreferrer">We simply install Cypress via npm:<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>In your project's root directory run: <code>npm install cypress --save-dev</code>.</li> <li>That's it, you can now run cypress: <code>npx cypress open</code>.</li> <li>To make life easier, for future runs, create an npm script in <code>package.json</code>:</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code>...
 <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>

...
    <span class="token property">&quot;cypress:open&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cypress open&quot;</span>

...
  <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><blockquote><p><code>package.json</code></p></blockquote></blockquote> <ul><li>Run cypress: <code>npm run cypress:open</code></li></ul> <p><img src="/devops_2022_2023_notes/assets/img/cypress-install.d3670517.png" alt=""></p> <blockquote><blockquote><p>On running <code>npm run cypress:open</code>, you should see the above browser window</p></blockquote></blockquote> <ul><li>When you see the above screen click on E2E tests and go through the steps (no need to change anything). Cypress should set up some config files for you</li></ul></div> <h2 id="task-2-testing-our-home-page"><a href="#task-2-testing-our-home-page" class="header-anchor">#</a> Task 2: Testing Our Home Page</h2> <p>We are now ready to test our homepage. We want to try and test as much of the home page functionality as possible. We are going to be validating multiple components at the same time.</p> <p>To begin with, we want to test the home page:</p> <ul><li>shows a table containing a list of rooms</li> <li>navigates to the create form when the add room button is pressed.</li></ul> <p>There is further functionality on this page (e.g., filter rooms). However, we are yet to complete this feature.</p> <div class="custom-block warning"><p class="custom-block-title">TASK 2: Writing Our First Test</p> <ul><li><p>First, ensure your database is seeded (we'll automate this moving forward): visit <code>http://localhost:3000/api/utility</code> to see your database.</p></li> <li><p>First, we need to make sure that elements on our home page are easy to programmatically find. To do this, we are going to mark the elements on our <code>src/pages/index.tsx</code> with <code>data-test</code> attributes.</p></li> <li><p>In <code>src/pages/index.tsx</code>, do the following:</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>        <span class="token operator">...</span>
	  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token string">&quot;/create&quot;</span><span class="token operator">&gt;</span>
             <span class="token operator">&lt;</span>a className<span class="token operator">=</span><span class="token string">&quot;blue-button&quot;</span> data<span class="token operator">-</span>test<span class="token operator">=</span><span class="token string">&quot;add-room-button&quot;</span><span class="token operator">&gt;</span>
               <span class="token operator">&lt;</span>PlusIcon className<span class="token operator">=</span><span class="token string">&quot;h-5 w-5&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span> Add Room<span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span>
             <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
	    <span class="token operator">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><blockquote><p><code>src/pages/index.tsx</code>: add <code>data-test=&quot;add-room-button&quot;</code> to our add room button. This will roughly be on line 40.</p></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>       <span class="token operator">...</span>
        <span class="token punctuation">{</span>rooms
                <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>capacity <span class="token operator">&gt;=</span> capacity<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                  <span class="token operator">&lt;</span>tr
                    key<span class="token operator">=</span><span class="token punctuation">{</span>r<span class="token punctuation">.</span>_id<span class="token punctuation">}</span>
                    className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;bg-gray-100&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span> data<span class="token operator">-</span>test<span class="token operator">=</span><span class="token string">&quot;room-item&quot;</span>
                  <span class="token operator">&gt;</span>
                   <span class="token operator">...</span><span class="token punctuation">.</span>
                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

		  <span class="token operator">...</span><span class="token punctuation">.</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><blockquote><p><code>src/pages/index.tsx</code>: add <code>data-test=&quot;room-item&quot;</code> to each row that will contain a room. This will roughly be on line 64.</p></blockquote></blockquote> <ul><li>Next, create your first spec file: <code>cypress/e2e/home.cy.ts</code>.</li> <li>Add the following code to <code>cypress/e2e/home.cy.ts</code>:</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;Home Page Test&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    cy<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:3000/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;shows a table containing a list of rooms&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;tr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;HC208&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// we can just grab selectors, JQUERY style</span>
    cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;[data-test='room-item']&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;RM202&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;[data-test='room-item']&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;have.length&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;navigates to the add room form&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;[data-test='add-room-button']&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//cy.get(&quot;[data-test='bread-crumb']&quot;).should(&quot;contain&quot;, &quot;Add Room&quot;);</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// this is to fix typescript complaint</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><blockquote><blockquote><p>cypress/e2e/home.cy.ts</p></blockquote></blockquote> <ul><li><p>If all has gone well, you should now be able to run your first spec from the Cypress, browser window. You'll see a real-time replay of what has happened, along with the status of each test, very nice!</p></li> <li><p>Let's consider a few aspects of the above example:</p></li> <li><p><code>describe(&quot;Home Page Test&quot;, ()</code>: This is the title for our test block.</p></li> <li><p><code>beforeEach(() =&gt; {</code>: This runs before each test. I our case, we tell cypress to visit our homepage.</p></li> <li><p><code>cy.get</code>, gets an element on the page you are testing. While you can grab any an element by its name (e.g., <code>cy.get(&quot;tr&quot;)</code>), <a href="https://docs.cypress.io/guides/references/best-practices" target="_blank" rel="noopener noreferrer">it's normally always better to use a <code>data-test</code> attribute<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></li> <li><p>Once we've grabbed an element, we can perform events or assertions (e.g., <code>cy.get(&quot;[data-test='room-item']&quot;).contains(&quot;RM202&quot;);</code> <code>cy.get(&quot;[data-test='room-item']&quot;).should(&quot;have.length&quot;, 18);</code>). For further information, see <a href="https://docs.cypress.io/api/commands/should#Syntax" target="_blank" rel="noopener noreferrer"><code>should</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="%5Bcontains%5D(https://docs.cypress.io/api/commands/contains)"><code>contains</code></a> documentation.</p></li> <li><p>To complete this task, can you un-comment <code>cy.get(&quot;[data-test='bread-crumb']&quot;).should(&quot;contain&quot;, &quot;Add Room&quot;);</code> and make this test work. To do this you will need to add the <code>data-test='bread-crumb</code> attribute to to the breadcrumb component that provides us with navigation information.</p></li></ul></div> <details class="custom-block details"><summary>solutions to the making the breadcrumb test work</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div
      className<span class="token operator">=</span><span class="token string">&quot;bg-white  mt-11 p-2 rounded-lg shadow-md flex&quot;</span>
      data<span class="token operator">-</span>test<span class="token operator">=</span><span class="token string">&quot;bread-crumb&quot;</span>
    <span class="token operator">&gt;</span>
<span class="token operator">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><blockquote><p><code>src/components/BreadCrumb.tsx</code></p></blockquote></blockquote></details> <h2 id="task-3-adding-custom-cypress-commands"><a href="#task-3-adding-custom-cypress-commands" class="header-anchor">#</a> Task 3: Adding Custom Cypress Commands</h2> <p>To make our lives easier, we can create custom Cypress commands. Notice how there is a lot of repetition in grabbing a element by the data attribute every time (e.g., `cy.get(&quot;[data-test='room-item']&quot;)), let's create a helper command to shorten this.</p> <div class="custom-block warning"><p class="custom-block-title">TASK 3: Adding Helper Commands</p> <p>To add type script commands, we need to make some tweaks to our Cypress configuration.</p> <ul><li>First create <code>cypress/support/index.ts</code> and add the following code:</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/// &lt;reference types=&quot;cypress&quot; /&gt;</span>
<span class="token comment">/**
 * getting rid of this error: index.ts' cannot be compiled under '--isolatedModules' because it is considered a global script file. Add an import, export, or an empty 'export {}' statement to make it a module.
 */</span>
 <span class="token comment">/** notice how I've disabled es-lint using the comment below */</span>
<span class="token comment">/* eslint-disable */</span>
declare global <span class="token punctuation">{</span>
	namespace Cypress <span class="token punctuation">{</span>
		<span class="token keyword">interface</span> <span class="token class-name">Chainable</span> <span class="token punctuation">{</span>

			<span class="token function">getByData</span><span class="token punctuation">(</span>dataTestAttribute<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> Chainable<span class="token operator">&lt;</span>JQuery<span class="token operator">&lt;</span>HTMLElement<span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>



<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><blockquote><p><code>cypress/support/index.ts</code></p></blockquote></blockquote> <ul><li>Next, replace the contents of <code>cypress/support/commands.ts</code> with:</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/// &lt;reference types=&quot;cypress&quot; /&gt;</span>

Cypress<span class="token punctuation">.</span>Commands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;getByData&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> cy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[data-test=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>selector<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><blockquote><p><code>cypress/support/commands.ts</code>, don't worry too much about what this code does, we will explore in more detail later.</p></blockquote></blockquote> <ul><li><p>You can now replace each instance of <code>cy.get(&quot;[data-test='*']&quot;)</code>, in your spec, with <code>ct.getData('*')</code> (e.g, <code>cy.get(&quot;[data-test='add-room-button']&quot;).click();</code> becomes <code>cy.getByData(&quot;add-room-button&quot;).click();</code>)</p></li> <li><p>Update your <code>cypress/e2e/home.cy.ts</code> file to use <code>getByData</code></p></li></ul></div> <h2 id="task-4-testing-new-functionality"><a href="#task-4-testing-new-functionality" class="header-anchor">#</a> Task 4: Testing new functionality</h2> <div class="custom-block warning"><p class="custom-block-title">TASK 4: Testing new functionality</p> <ul><li>Increasingly, I will be getting you to engage with third-party documentation complete tasks. With this in mind, let's try and create, and test the validation functionality for our <code>http://localhost:3000/create</code> form. Within this page, I am using the <code>src/components/RoomForm.tsx</code> component to display a form. Currently, the form has no validation! At the moment, we don't want to send the data anywhere; however, we do want to validate the data.</li></ul> <p><img src="form-image.png" alt=""></p> <ul><li>Can you do the following:</li></ul> <ol><li><p>Add validation that aligns with the above image to <code>src/components/RoomForm.tsx</code>. <a href="https://react-hook-form.com/get-started" target="_blank" rel="noopener noreferrer">To do this, you should use React Hook form<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li><a href="https://react-hook-form.com/get-started#typescript" target="_blank" rel="noopener noreferrer">Can you also add support for typescript<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol></li> <li><p>Finally, test your newly added functionality. Create a new spec: <code>cypress/e2e/create-cy.ts</code>, and add tests that check your create page:</p> <ol><li>prevents not valid forms from being submitted</li> <li>Shows and removes errors when correct or incorrect values are entered</li></ol></li></ol></div> <p><strong>solutions</strong></p> <details class="custom-block details"><summary>4.1 Solution</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>CloudUploadIcon<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@heroicons/react/outline&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>SubmitHandler<span class="token punctuation">,</span> useForm<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-hook-form&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>buildings<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../mocks/data&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">RoomFormProps</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">onSubmit</span><span class="token operator">:</span> SubmitHandler<span class="token operator">&lt;</span>RoomValues<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">RoomValues</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">number</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">building</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">capacity</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
  notes<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">RoomForm</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">props</span><span class="token operator">:</span> RoomFormProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>onSubmit<span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    register<span class="token punctuation">,</span>
    handleSubmit<span class="token punctuation">,</span>
    <span class="token literal-property property">formState</span><span class="token operator">:</span> <span class="token punctuation">{</span>errors<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span> <span class="token operator">=</span> useForm<span class="token operator">&lt;</span>RoomValues<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;flex flex-col align-middle  space-y-2&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a className<span class="token operator">=</span><span class="token string">&quot;gray-outline-button&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>CloudUploadIcon className<span class="token operator">=</span><span class="token string">&quot;h-5 w-5&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span> Add Room Photos
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label className<span class="token operator">=</span><span class="token string">&quot;font-semibold&quot;</span><span class="token operator">&gt;</span> Building<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>buildings<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">b<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">&quot;flex space-x-2&quot;</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>input
                <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;building&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span>
                value<span class="token operator">=</span><span class="token punctuation">{</span>b<span class="token punctuation">.</span>code<span class="token punctuation">}</span>
                data<span class="token operator">-</span>test<span class="token operator">=</span><span class="token string">&quot;building-input&quot;</span>
                name<span class="token operator">=</span><span class="token string">&quot;building&quot;</span>
              <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>input<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>label className<span class="token operator">=</span><span class="token string">&quot;text-sm&quot;</span><span class="token operator">&gt;</span>
                <span class="token punctuation">{</span>b<span class="token punctuation">.</span>name<span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>b<span class="token punctuation">.</span>code<span class="token punctuation">}</span><span class="token punctuation">)</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>h3 className<span class="token operator">=</span><span class="token string">&quot;font-bold text-red-600&quot;</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>errors<span class="token punctuation">.</span>building <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>span data<span class="token operator">-</span>test<span class="token operator">=</span><span class="token string">&quot;building-error&quot;</span><span class="token operator">&gt;</span>
              <span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span>
              <span class="token constant">A</span> valid building is required
            <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>label className<span class="token operator">=</span><span class="token string">&quot;font-semibold&quot;</span><span class="token operator">&gt;</span> Room Number<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input
          className<span class="token operator">=</span><span class="token string">&quot;border-2 rounded-md p-2&quot;</span>
          data<span class="token operator">-</span>test<span class="token operator">=</span><span class="token string">&quot;number-input&quot;</span>
          type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Room Number&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3 className<span class="token operator">=</span><span class="token string">&quot;font-bold text-red-600&quot;</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>errors<span class="token punctuation">.</span>number <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>span data<span class="token operator">-</span>test<span class="token operator">=</span><span class="token string">&quot;number-error&quot;</span><span class="token operator">&gt;</span> Room number is required<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label className<span class="token operator">=</span><span class="token string">&quot;font-semibold&quot;</span><span class="token operator">&gt;</span> Capacity <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input
          className<span class="token operator">=</span><span class="token string">&quot;border-2 rounded-md p-2&quot;</span>
          type<span class="token operator">=</span><span class="token string">&quot;number&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;Capacity&quot;</span>
          data<span class="token operator">-</span>test<span class="token operator">=</span><span class="token string">&quot;capacity-input&quot;</span>
          <span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;capacity&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3 className<span class="token operator">=</span><span class="token string">&quot;font-bold text-red-600&quot;</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>errors<span class="token punctuation">.</span>capacity <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>span data<span class="token operator">-</span>test<span class="token operator">=</span><span class="token string">&quot;capacity-error&quot;</span><span class="token operator">&gt;</span> Capacity is required<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;flex justify-center w-full mt-3&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>button data<span class="token operator">-</span>test<span class="token operator">=</span><span class="token string">&quot;submit-button&quot;</span> className<span class="token operator">=</span><span class="token string">&quot;blue-button_no-icon&quot;</span><span class="token operator">&gt;</span>
            Add Room
          <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br></div></div><blockquote><blockquote><p><code>src/components/RoomForm.tsx</code>
:::</p></blockquote></blockquote> <details class="custom-block details"><summary>4.2 solutions</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;Create Room Test&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    cy<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:3000/create&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;prevents a in-valid value from from being submitted&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// first, we check that errors are not present</span>

    cy<span class="token punctuation">.</span><span class="token function">getByData</span><span class="token punctuation">(</span><span class="token string">&quot;building-error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;not.exist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cy<span class="token punctuation">.</span><span class="token function">getByData</span><span class="token punctuation">(</span><span class="token string">&quot;number-error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;not.exist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cy<span class="token punctuation">.</span><span class="token function">getByData</span><span class="token punctuation">(</span><span class="token string">&quot;capacity-error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;not.exist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    cy<span class="token punctuation">.</span><span class="token function">getByData</span><span class="token punctuation">(</span><span class="token string">&quot;submit-button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cy<span class="token punctuation">.</span><span class="token function">getByData</span><span class="token punctuation">(</span><span class="token string">&quot;building-error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;exist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cy<span class="token punctuation">.</span><span class="token function">getByData</span><span class="token punctuation">(</span><span class="token string">&quot;number-error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;exist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cy<span class="token punctuation">.</span><span class="token function">getByData</span><span class="token punctuation">(</span><span class="token string">&quot;capacity-error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;exist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;removes errors when correct values are entered&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    cy<span class="token punctuation">.</span><span class="token function">getByData</span><span class="token punctuation">(</span><span class="token string">&quot;submit-button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cy<span class="token punctuation">.</span><span class="token function">getByData</span><span class="token punctuation">(</span><span class="token string">&quot;building-input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cy<span class="token punctuation">.</span><span class="token function">getByData</span><span class="token punctuation">(</span><span class="token string">&quot;building-error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;not.exist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cy<span class="token punctuation">.</span><span class="token function">getByData</span><span class="token punctuation">(</span><span class="token string">&quot;number-input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;405&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cy<span class="token punctuation">.</span><span class="token function">getByData</span><span class="token punctuation">(</span><span class="token string">&quot;number-error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;not.exist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cy<span class="token punctuation">.</span><span class="token function">getByData</span><span class="token punctuation">(</span><span class="token string">&quot;capacity-input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;50&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cy<span class="token punctuation">.</span><span class="token function">getByData</span><span class="token punctuation">(</span><span class="token string">&quot;capacity-error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token string">&quot;not.exist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><blockquote><blockquote><p><code>cypress/e2e/create-cy.ts</code></p></blockquote></blockquote></details></details> <h2 id="further-reading"><a href="#further-reading" class="header-anchor">#</a> Further Reading</h2> <ul><li><a href="https://learn.cypress.io/" target="_blank" rel="noopener noreferrer">Go over the Cypress tutorial<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.youtube.com/watch?v=ZGKGb109-I4" target="_blank" rel="noopener noreferrer">Watch this quick video for a reason no to unit test<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.youtube.com/watch?v=5hN6OZDyQtk" target="_blank" rel="noopener noreferrer">Watch the DHH talk on testing<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/devops_2022_2023_notes/week-5/lecture.html" class="prev">
        Lecture
      </a></span> <span class="next"><a href="/devops_2022_2023_notes/week-6/lecture.html">
        Lecture
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/devops_2022_2023_notes/assets/js/app.385aff99.js" defer></script><script src="/devops_2022_2023_notes/assets/js/2.df6d3794.js" defer></script><script src="/devops_2022_2023_notes/assets/js/7.d6d14512.js" defer></script>
  </body>
</html>
