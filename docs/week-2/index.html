<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Week 2: Static Code Analysis</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/devops_2022_2023_notes/assets/css/0.styles.053b07ab.css" as="style"><link rel="preload" href="/devops_2022_2023_notes/assets/js/app.dbdd3740.js" as="script"><link rel="preload" href="/devops_2022_2023_notes/assets/js/2.28c99d85.js" as="script"><link rel="preload" href="/devops_2022_2023_notes/assets/js/15.aa77efef.js" as="script"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/10.a34ef9e8.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/11.361566a1.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/12.faa984b8.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/13.91aaf4e4.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/14.f259ceac.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/16.c56bab23.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/17.024aaa19.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/18.206030f8.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/19.d06ec004.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/20.90b18c35.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/21.e6bb411b.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/22.3e6919f7.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/23.9a6ecf7f.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/24.57ca6ef8.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/25.2cf004b8.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/26.d9c286d0.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/27.ab3babc4.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/28.e97b2f97.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/29.c7f37bf2.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/3.0e5466e2.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/30.7d47380a.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/31.d59778af.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/32.0411bd28.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/33.cdec406d.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/34.4833542a.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/35.ebc27bbb.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/36.c7814738.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/37.9b69b4a4.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/38.b710be6d.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/39.5f329c78.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/4.7fe56eac.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/40.e54bb70b.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/41.ec30a8d0.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/42.eaba03a6.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/5.31b5bfab.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/6.ab9babc7.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/7.46007374.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/8.77f507e5.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/9.e4f7aa69.js">
    <link rel="stylesheet" href="/devops_2022_2023_notes/assets/css/0.styles.053b07ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/devops_2022_2023_notes/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Module Overview</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/devops_2022_2023_notes/" aria-current="page" class="sidebar-link">Module Introduction (Start Here ▶️)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Assessments</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/devops_2022_2023_notes/assessment/" class="sidebar-link">Assessment Overview</a></li><li><a href="/devops_2022_2023_notes/assessment/scenario.html" class="sidebar-link">Assessment Scenario</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Side Tutorials</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 1: Introduction to DevOps</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Week 2: Static Code Analysis (1)</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/devops_2022_2023_notes/week-2/lecture.html" class="sidebar-link">Lecture: Static Code Analysis:</a></li><li><a href="/devops_2022_2023_notes/week-2/" aria-current="page" class="active sidebar-link">Week 2: Static Code Analysis</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-2/#questions-to-address" class="sidebar-link">Questions to Address</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-2/#lesson-dependencies" class="sidebar-link">Lesson Dependencies</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-2/#task-1-set-up" class="sidebar-link">TASK 1: Set up</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-2/#typescript" class="sidebar-link">Typescript</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-2/#task-2-the-problem-with-javascript" class="sidebar-link">TASK 2: The Problem with JavaScript</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-2/#setting-up-typescript-with-next-js" class="sidebar-link">Setting up TypeScript with Next.js</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-2/#task-3-configuring-typescript-in-our-sample-project" class="sidebar-link">TASK 3: Configuring TypeScript in our sample project</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-2/#task-4-typescripting" class="sidebar-link">TASK 4: TypeScripting</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-2/#linting" class="sidebar-link">Linting</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-2/#setting-up-a-linter" class="sidebar-link">Setting Up a Linter</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-2/#task-5-editor-support" class="sidebar-link">TASK 5: Editor support</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-2/#task-6-setting-up-better-linting" class="sidebar-link">TASK 6: Setting up better linting</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-2/#prettier" class="sidebar-link">Prettier</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-2/#further-reading" class="sidebar-link">Further Reading</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-2/#code-formatting-and-linting" class="sidebar-link">Code Formatting and Linting</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 3: Static Code Analysis (ii)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 4: Component Driven Development</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 5: Testing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 6: Database Testing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 7: Authentication Testing Strategies and Deployment</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 8: CD Strategies</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 9: Unit Testing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Week 10: Monitoring and Logging</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/devops_2022_2023_notes/week-10/lecture.html" class="sidebar-link">Lecture</a></li><li><a href="/devops_2022_2023_notes/week-10/" class="sidebar-link">Week 10: Monitoring and Logging</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 11: Module Wrap Up (assessment support)</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="week-2-static-code-analysis"><a href="#week-2-static-code-analysis" class="header-anchor">#</a> Week 2: Static Code Analysis</h1> <p><img src="/devops_2022_2023_notes/assets/img/ci-pipeline.c5857f53.png" alt=""></p> <blockquote><blockquote><p>This is the full continuous integration pipeline we will be setting up. This week, we are looking at the first part: static analysis.</p></blockquote></blockquote> <p>So it has begun: this week, we are starting to build our continuous integration pipeline (CI). We will begin this journey by leaping into static code analysis and code formatting.</p> <div class="custom-block tip"><p class="custom-block-title">DEFINITION</p> <p>📖 <strong>Static Code Analysis</strong>
Static code analysis is the process of automatically checking code for potential errors before it runs.</p></div> <div class="custom-block tip"><p class="custom-block-title">DEFINITION</p> <p>📖 <strong>Code Formatting</strong>
Code formatting ensures that you and your team's code follows a consistent style.</p></div> <p>What is most exciting is that we can use tools to perform code formatting and static analysis for us specifically:</p> <ul><li>Typescript</li> <li>JSLint</li> <li>Prettier</li> <li>Huskey</li></ul> <p>Using the above tools, we can perform static code analysis and code formatting with little to no cognitive demand.</p> <h2 id="questions-to-address"><a href="#questions-to-address" class="header-anchor">#</a> Questions to Address</h2> <p>Throughout this week, we will be addressing the following questions:</p> <ol><li>How can we ensure that a team follows a consistent coding standard?</li> <li>How can we enforce these standards?</li></ol> <h2 id="lesson-dependencies"><a href="#lesson-dependencies" class="header-anchor">#</a> Lesson Dependencies</h2> <ul><li><a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" target="_blank" rel="noopener noreferrer">You will need to ensure you have the version control tool Git installed<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>While you can use any text editor for this session, I recommend that you install <a href="https://code.visualstudio.com/download" target="_blank" rel="noopener noreferrer">VS Code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="getting-the-week-two-starting-code-base"><a href="#getting-the-week-two-starting-code-base" class="header-anchor">#</a> Getting the week two starting code base</h3> <p>In your command line shell, run:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>
<span class="token function">git</span> clone --branch week-2-starter-code https://github.com/joeappleton18/solent-room-finder.git solent-room-finder-week-2

- Navigate into the created  <span class="token variable"><span class="token variable">`</span>solent-room-finder<span class="token variable">`</span></span> folder: <span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">cd</span> solent-room-finder-week-2<span class="token variable">`</span></span>
- Install the dependencies: <span class="token variable"><span class="token variable">`</span><span class="token function">npm</span> <span class="token function">install</span><span class="token variable">`</span></span>
- Run the development server: <span class="token variable"><span class="token variable">`</span><span class="token function">npm</span> run dev<span class="token variable">`</span></span>
- Open <span class="token punctuation">[</span>http://localhost:3000<span class="token punctuation">]</span><span class="token punctuation">(</span>http://localhost:3000<span class="token punctuation">)</span> with your browser to see the result.

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="task-1-set-up"><a href="#task-1-set-up" class="header-anchor">#</a> TASK 1: Set up</h2> <div class="custom-block warning"><p class="custom-block-title">TASK 1: Set up</p> <p>Follow the steps above to, ensure you have the lesson dependencies set up: including the starting code base.</p></div> <h1 id="static-code-checking"><a href="#static-code-checking" class="header-anchor">#</a> Static Code Checking</h1> <h2 id="typescript"><a href="#typescript" class="header-anchor">#</a> Typescript</h2> <div class="custom-block tip"><p class="custom-block-title">Important Point</p> <p>⭐️</p> <p>This is not a deep dive into learning TypeScript; rather, we are just going to be scratching the surface. If you feel like typescript is suitable for your assessment, then you will need to do some further research.</p></div> <div class="custom-block tip"><p class="custom-block-title">DEFINITION</p> <p>📖 <strong>Type Script</strong>
According to its creators, TypeScript adds additional syntax to JavaScript to support a tighter integration with your editor. Catch errors early in your editor.</p></div> <p>Put simply, TypeScript allows us to capture errors in our code base before runtime. It is a superset of JavaScript, extending the functionality of its vanilla alternative. However, browsers do not support TypScript; your code will be Transpiled to vanilla JavaScript before it runs in the browser.</p> <p><strong>So, why introduce potentially more tooling and complexity into the developer experience?</strong></p> <p>To explore the above question, let's consider an example:</p> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">renderPeople</span><span class="token punctuation">(</span><span class="token parameter">people</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> people<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;
		&lt;li&gt; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> &lt;/li&gt;
		&lt;li&gt; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p<span class="token punctuation">.</span>location<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> &lt;/li&gt;
	&lt;/div&gt;
	</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">renderPeople</span><span class="token punctuation">(</span><span class="token string">&quot;joe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><blockquote><p><code>sample.js</code>: Typical JavaScript code</p></blockquote></blockquote> <h2 id="task-2-the-problem-with-javascript"><a href="#task-2-the-problem-with-javascript" class="header-anchor">#</a> TASK 2: The Problem with JavaScript</h2> <div class="custom-block warning"><p class="custom-block-title">TASK 2: The Problem with JavaScript</p> <p>Let's consider some ways in which we can cause a runtime error with the above function. Place the function in a <code>sample.js</code> file;</p> <ul><li>To run it, use the command <code>node sample.js</code></li> <li>You'll see the error <code>people.map is not a function</code>. This is because we are trying to run an array operation on a String; however, the function is expecting an array of objects.</li> <li>Consider a few further ways to cause a runtime error.</li> <li>See if you can make the code run correctly.</li></ul></div> <p>You'd be surprised how often type mismatches cause errors. Using TypeScript, we can describe the shape of data passing around our application, capturing errors before we run our code. Let us fix the above example.</p> <p>First, we need to change the extension of our sample from <code>.js</code> to <code>.ts</code>
Now, we can start using types:</p> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>type peopleType <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
	<span class="token literal-property property">location</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
	<span class="token punctuation">[</span>otherOptions<span class="token operator">:</span> string<span class="token punctuation">]</span><span class="token operator">:</span> unknown<span class="token punctuation">;</span> <span class="token comment">// allow any additional options</span>
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function">renderPeople</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">people</span><span class="token operator">:</span> peopleType<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> people<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;
		&lt;li&gt; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> &lt;/li&gt;
		&lt;li&gt; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p<span class="token punctuation">.</span>location<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> &lt;/li&gt;
	&lt;/div&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">renderPeople</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Joe&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">location</span><span class="token operator">:</span> <span class="token string">&quot;Brighton&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><blockquote><blockquote><p><code>sample.ts</code>: the above <code>sample.js</code> converted to TypeScript. At the moment, you may not have TypeScript installed, so we can not run this example. However, you should still get editor feedback.</p></blockquote></blockquote> <p>In the above example, notice how we can describe the shape of the data our render people function will accept by defining a <code>peopleType</code> (l1). Our editor will now check that <code>renderPeople</code> only accepts and array of objects, and each object must have the <code>name</code> and <code>location</code> property.</p> <h2 id="setting-up-typescript-with-next-js"><a href="#setting-up-typescript-with-next-js" class="header-anchor">#</a> Setting up TypeScript with Next.js</h2> <p>We are using <code>Next.js</code> for our sample RoomFinder application. Luckily, <a href="https://nextjs.org/docs/basic-features/typescript" target="_blank" rel="noopener noreferrer">&quot;Next.js provides an integrated TypeScript experience, including zero-configuration setup and built-in types for Pages, APIs, and more&quot;<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="task-3-configuring-typescript-in-our-sample-project"><a href="#task-3-configuring-typescript-in-our-sample-project" class="header-anchor">#</a> TASK 3: Configuring TypeScript in our sample project</h2> <div class="custom-block warning"><p class="custom-block-title">TASK 3: Configuring TypeScript in our sample project</p> <ul><li><p>To get started with TypeScript on a Next.js project, create an empty <code>tsconfig.json</code> file in the root folder of your room tracking application.</p></li> <li><p>Run your application: <code>npm run dev</code>. You will see:</p></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>Please <span class="token function">install</span> typescript, @types/react, and @types/node by running:

        <span class="token function">npm</span> <span class="token function">install</span> --save-dev typescript @types/react @types/node
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>To follow the instructions, run the command <code>npm install --save-dev typescript @types/react @types/node</code></li> <li>Run your application: <code>npm run dev</code>. Next.js will then populate your <code>tsconfig.json</code> file.</li> <li><code>tsconfig.json</code> contains our typescript configuration; there is a slight glitch with manually setting up TypeScript in next JS; to solve this add the below option to <code>tsconfig.json</code>:</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code>compilerOptions&quot;<span class="token operator">:</span> <span class="token punctuation">{</span>
...
<span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
...
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div> <p>Thats it, we are now ready to start TypeScripting</p> <h2 id="task-4-typescripting"><a href="#task-4-typescripting" class="header-anchor">#</a> TASK 4: TypeScripting</h2> <div class="custom-block warning"><p class="custom-block-title">TASK 4: TypeScripting</p> <p>I suggest you adopt TypeScript gradually. Start tinkering with the occasional file, adding types: it is therapeutic! With this mantra in mind, let's add some types to <code>src/components/Filter.js</code>.</p> <ol><li><p>First, rename <code>src/components/Filter.js</code> to <code>src/components/Filter.tsx</code>. Why not <code>.ts</code>? This is because our js file has JSX in it.</p></li> <li><p>Next, can you figure out how to define a type, called <code>FilterType</code>, for the default filter component (~l15)? When you are done, the signature of the function should look like this <code>export default function Filter(props: FilterType)</code>. <a href="https://www.typescriptlang.org/docs/handbook/2/functions.html#call-signatures" target="_blank" rel="noopener noreferrer">Here is some further reading<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>In your Filter.tsx file, you'll you'll notice that <code>document.getElementById(&quot;form&quot;).reset()</code> shows an error (l.28). This is because typescript can't infer that the element will be a form. <a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-assertions" target="_blank" rel="noopener noreferrer">Can you use a type assertion to fix this<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>In your route directory, you can now check your application is type safe: <code>npx tsc</code>. You probably will get this error:</p></li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> Argument of <span class="token builtin class-name">type</span> <span class="token string">'number | number[]'</span> is not assignable to parameter of <span class="token builtin class-name">type</span> <span class="token string">'number'</span><span class="token builtin class-name">.</span>
  Type <span class="token string">'number[]'</span> is not assignable to <span class="token builtin class-name">type</span> <span class="token string">'number'</span><span class="token builtin class-name">.</span>

<span class="token number">81</span>                   <span class="token assign-left variable">onChange</span><span class="token operator">=</span><span class="token punctuation">{</span>n <span class="token operator">=</span><span class="token operator">&gt;</span> onSlide<span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">}</span>
                                            ~


Found <span class="token number">1</span> error <span class="token keyword">in</span> src/components/Filter.tsx:81
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="5"><li>Can you see if you can fix the error!</li></ol></div> <h3 id="task-solutions"><a href="#task-solutions" class="header-anchor">#</a> Task solutions</h3> <blockquote><blockquote><p>Solution corresponding to the task step number. You should attempt the task before you look at the solutions 😆.</p></blockquote></blockquote> <details class="custom-block details"><summary>SOLUTION (2) Click me to view the code</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code>type FilterType <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">capacity</span><span class="token operator">:</span> number<span class="token punctuation">,</span>
  <span class="token function-variable function">onSlide</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">n</span><span class="token operator">:</span> number <span class="token operator">|</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> unknown<span class="token punctuation">,</span>
  <span class="token function-variable function">onReset</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> unknown<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details> <details class="custom-block details"><summary>SOLUTION (3) Click me to view the code</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;form&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLFormElement<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></details> <details class="custom-block details"><summary>SOLUTION (5) Click me to view the code</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code>type FilterType <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">capacity</span><span class="token operator">:</span> number<span class="token punctuation">,</span>
  <span class="token function-variable function">onSlide</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">n</span><span class="token operator">:</span> number <span class="token operator">|</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> unknown<span class="token punctuation">,</span>
  <span class="token function-variable function">onReset</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> unknown<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details> <h2 id="linting"><a href="#linting" class="header-anchor">#</a> Linting</h2> <p>Linting is the technique of using tools to statically analyse a code base to find potential problems. According to the developers behind ESLint, linting has <a href="https://eslint.org/docs/latest/user-guide/getting-started" target="_blank" rel="noopener noreferrer">&quot;the goal of making code more consistent and avoiding bugs.&quot;<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Linters have out-of-the-box rules and also the option to add custom rules. You can do things like:</p> <ul><li>Ensure there are no unused variable</li> <li>Disallow variable redeclaration</li> <li>Disallow duplicate keys in objects</li></ul> <p><a href="https://nextjs.org/docs/basic-features/eslint" target="_blank" rel="noopener noreferrer">&quot;Since version 11.0.0, Next.js provides an integrated ESLint experience out of the box&quot;<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="setting-up-a-linter"><a href="#setting-up-a-linter" class="header-anchor">#</a> Setting Up a Linter</h2> <p>As previously mentioned, our room tracking application is built in Next.js, which comes with a configured version of the linting tool ESLint. You can run it by using the command: <code>npm run lint</code>. You'll see it tells us <code>&quot;4:32 Error: Strings must use doublequote.&quot;</code> All is well and good; however, where is this rule coming from? We can set linting rules in, <code>.eslintrc.json</code>. There are hundreds of rules we can set; however, more often than not developers choose an existing rule set by using the <code>extends</code> property.</p> <h2 id="task-5-editor-support"><a href="#task-5-editor-support" class="header-anchor">#</a> TASK 5: Editor support</h2> <div class="custom-block warning"><p class="custom-block-title">TASK 5: Editor Support</p> <p>As it stands, we have to run <code>npx tsc</code> to lint our code. While this is not overly inconvenient, would it not be nice if our editor highlighted and, where possible, automatically fixed linting errors. Well, with the VSCode extension, we can do just this:</p> <ul><li><p><a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" target="_blank" rel="noopener noreferrer">Install the VSCode ESLint extension<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>Next, update your <code>.vscode/settings.json</code> to automatically lint and fixe errors on save:</p></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">.</span>
  <span class="token string-property property">&quot;editor.codeActionsOnSave&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;source.fixAll.eslint&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;eslint.validate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;javascript&quot;</span><span class="token punctuation">]</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><blockquote><p>.vscode/settings.json: these setting may already be in there for you.</p></blockquote></blockquote> <ul><li>Boom, now the majority of your linting errors will be fixed for you! Don't believe me, try adding an unused import to the top of one of your files (e.g., <code>import { useState } from &quot;react&quot;;</code>) when you save the file it should automatically be removed for you.</li></ul></div> <h2 id="task-6-setting-up-better-linting"><a href="#task-6-setting-up-better-linting" class="header-anchor">#</a> TASK 6: Setting up better linting</h2> <div class="custom-block warning"><p class="custom-block-title">TASK 6: Setting up better linting</p> <ul><li>At the moment we have quite basic linting, let's fix this.</li> <li>As previously mentioned, we can easily extend the linter with our own rules or third-party rules. Let's go for the latter option and install typescript-eslint/eslint-plugin.</li></ul> <ol><li><p>in your terminal run: <code>npm install --save-dev @typescript-eslint/eslint-plugin @typescript-eslint/parser</code></p></li> <li><p>While we are at it, let's also extend the current config with <code>eslint:recommended</code>, this comes with the eslint core install. Update your <code>.eslintrc.json</code> so it resembles the below.</p></li></ol> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@typescript-eslint&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;next/core-web-vitals&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eslint:recommended&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;plugin:@typescript-eslint/recommended&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;quotes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;double&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@typescript-eslint/no-unused-vars&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@typescript-eslint/no-explicit-any&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><blockquote><p>.eslintrc.json: your version should resemble the above</p></blockquote></blockquote> <ol start="3"><li>Run <code>npm run lint</code> there should be a lot more errors now; to finish the task, fix the errors. Mostly, you should just be able to navigate to each file and save it: VSCode will fix the linting issues.</li></ol></div> <h2 id="prettier"><a href="#prettier" class="header-anchor">#</a> Prettier</h2> <p>Prettier is an opinionated code formatter; however, as you have seen our linter already formats code (to a degree) It may at first seem similar to a linter; however, on closer inspection, there are some subtle differences:</p> <ul><li><p>Linters are mostly worried about code quality: eg no-unused-vars, no-extra-bind, no-implicit-globals, prefer-promise-reject-error</p></li> <li><p>Prettier prints your whole program from scratch applying only formatting rules: eg: max-len, no-mixed-spaces-and-tabs, keyword-spacing, comma-style. As a developer, you never have to worry about formatting your code again.</p></li></ul> <h2 id="further-reading"><a href="#further-reading" class="header-anchor">#</a> Further Reading</h2> <h3 id="typescript-2"><a href="#typescript-2" class="header-anchor">#</a> TypeScript</h3> <ul><li><a href="https://www.typescriptlang.org/docs/handbook/intro.html" target="_blank" rel="noopener noreferrer">The TypeScript Hand Book, well worth flicking through∫<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="code-formatting-and-linting"><a href="#code-formatting-and-linting" class="header-anchor">#</a> Code Formatting and Linting</h2> <ul><li><a href="https://prettier.io/playground/" target="_blank" rel="noopener noreferrer">Check out all the formatting rules you can use for prettier<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/devops_2022_2023_notes/week-2/lecture.html" class="prev">
        Lecture: Static Code Analysis:
      </a></span> <span class="next"><a href="/devops_2022_2023_notes/week-3/lecture.html">
        Lecture
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/devops_2022_2023_notes/assets/js/app.dbdd3740.js" defer></script><script src="/devops_2022_2023_notes/assets/js/2.28c99d85.js" defer></script><script src="/devops_2022_2023_notes/assets/js/15.aa77efef.js" defer></script>
  </body>
</html>
