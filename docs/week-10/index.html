<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Week 10: Monitoring and Logging</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/devops_2022_2023_notes/assets/css/0.styles.053b07ab.css" as="style"><link rel="preload" href="/devops_2022_2023_notes/assets/js/app.dbdd3740.js" as="script"><link rel="preload" href="/devops_2022_2023_notes/assets/js/2.28c99d85.js" as="script"><link rel="preload" href="/devops_2022_2023_notes/assets/js/6.ab9babc7.js" as="script"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/10.a34ef9e8.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/11.361566a1.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/12.faa984b8.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/13.91aaf4e4.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/14.f259ceac.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/15.aa77efef.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/16.c56bab23.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/17.024aaa19.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/18.206030f8.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/19.d06ec004.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/20.90b18c35.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/21.e6bb411b.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/22.3e6919f7.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/23.9a6ecf7f.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/24.57ca6ef8.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/25.2cf004b8.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/26.d9c286d0.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/27.ab3babc4.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/28.e97b2f97.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/29.c7f37bf2.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/3.0e5466e2.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/30.7d47380a.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/31.d59778af.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/32.0411bd28.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/33.cdec406d.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/34.4833542a.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/35.ebc27bbb.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/36.c7814738.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/37.9b69b4a4.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/38.b710be6d.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/39.5f329c78.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/4.7fe56eac.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/40.e54bb70b.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/41.ec30a8d0.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/42.eaba03a6.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/5.31b5bfab.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/7.46007374.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/8.77f507e5.js"><link rel="prefetch" href="/devops_2022_2023_notes/assets/js/9.e4f7aa69.js">
    <link rel="stylesheet" href="/devops_2022_2023_notes/assets/css/0.styles.053b07ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/devops_2022_2023_notes/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Module Overview</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/devops_2022_2023_notes/" aria-current="page" class="sidebar-link">Module Introduction (Start Here ‚ñ∂Ô∏è)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Assessments</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/devops_2022_2023_notes/assessment/" class="sidebar-link">Assessment Overview</a></li><li><a href="/devops_2022_2023_notes/assessment/scenario.html" class="sidebar-link">Assessment Scenario</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Side Tutorials</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 1: Introduction to DevOps</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 2: Static Code Analysis (1)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 3: Static Code Analysis (ii)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 4: Component Driven Development</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 5: Testing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 6: Database Testing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 7: Authentication Testing Strategies and Deployment</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 8: CD Strategies</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 9: Unit Testing</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Week 10: Monitoring and Logging</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/devops_2022_2023_notes/week-10/lecture.html" class="sidebar-link">Lecture</a></li><li><a href="/devops_2022_2023_notes/week-10/" aria-current="page" class="active sidebar-link">Week 10: Monitoring and Logging</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-10/#lesson-dependencies-üî®" class="sidebar-link">Lesson Dependencies üî®</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-10/#task-0-get-the-starter-application" class="sidebar-link">TASK 0: Get the Starter Application</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-10/#what-to-measure" class="sidebar-link">What to Measure?</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-10/#code-coverage" class="sidebar-link">Code Coverage</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-10/#logging" class="sidebar-link">Logging</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-10/#task-2-configure-sentry-in-your-room-finder-application" class="sidebar-link">Task 2: Configure Sentry in Your Room Finder Application</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-10/#analytics" class="sidebar-link">Analytics</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-10/#task-3-installing-analytics" class="sidebar-link">Task 3: Installing Analytics</a></li><li class="sidebar-sub-header"><a href="/devops_2022_2023_notes/week-10/#the-end" class="sidebar-link">THE END</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Week 11: Module Wrap Up (assessment support)</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="week-10-monitoring-and-logging"><a href="#week-10-monitoring-and-logging" class="header-anchor">#</a> Week 10: Monitoring and Logging</h1> <p>We are nearly there! Recall, way back in week-1, I introduced the basic principles of DevOps:</p> <ul><li>Continuous Integration</li> <li>Continuous Delivery/Deployment</li> <li>Infrastructure as Code (beyond the scope of the module)</li> <li>Monitoring and Logging</li> <li>Communication and Collaboration</li></ul> <p>This week we will consider Monitoring and Logging by addressing the following questions:</p> <ul><li>How can I monitor what is tested?</li> <li>How can I log application events in a way that I can easily diagnose problems?</li> <li>How can I understand how users are interacting with my application?</li></ul> <h2 id="lesson-dependencies-üî®"><a href="#lesson-dependencies-üî®" class="header-anchor">#</a> Lesson Dependencies üî®</h2> <ul><li><a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" target="_blank" rel="noopener noreferrer">You will need to ensure you have the version control tool Git installed<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>You'll need to know the basic Git Commands (e.g., <code>checkout -b</code>, <code>push</code>, and <code>commit</code>)</li></ul></li> <li>While you can use any text editor for this session, I recommend that you install <a href="https://code.visualstudio.com/download" target="_blank" rel="noopener noreferrer">VS Code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>You will need access to a MongDB database.
<ul><li>You can install your own locally</li> <li>Use <a href="https://www.mongodb.com/atlas/database" target="_blank" rel="noopener noreferrer">AtlasDB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><a href="https://cloudinary.com/" target="_blank" rel="noopener noreferrer">You need a Cloudinary account<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.github.com" target="_blank" rel="noopener noreferrer">You need a GitHub account<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="task-0-get-the-starter-application"><a href="#task-0-get-the-starter-application" class="header-anchor">#</a> TASK 0: Get the Starter Application</h2> <p>If you have a working version of the room finder with authentications, you don't need to get a new version of the project. If not,</p> <p>In your command line shell, run:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> clone --branch week-10-starter-code  https://github.com/joeappleton18/solent-room-finder.git week-10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><a href="/devops_2022_2023_notes/week-7/#task-0-1-get-the-starter-application">Next, follow the setup steps from week 7</a></p> <h2 id="what-to-measure"><a href="#what-to-measure" class="header-anchor">#</a> What to Measure?</h2> <p>There are several measurement techniques that can be used in a DevOps environment to monitor and improve the performance and reliability of software systems. These techniques include:</p> <ol><li><p>Monitoring: Continuous monitoring of key metrics, such as system performance, availability, and error rates, can provide teams with real-time insights into the health and stability of their systems.</p></li> <li><p>Dashboards: Dashboards can be used to visualise key metrics and to provide teams with an overview of the current state of their systems.</p></li> <li><p>Log analysis: Log analysis can be used to identify trends and patterns in system behavior, and to quickly identify and diagnose issues.</p></li></ol> <p>By using these measurement techniques, teams can gain a better understanding of their systems, and can use this information to make informed decisions about how to improve the performance and reliability of their software.</p> <p>This week, I would like to quickly introduce a few methods to gain a better understanding of our room tracking application.</p> <h2 id="code-coverage"><a href="#code-coverage" class="header-anchor">#</a> Code Coverage</h2> <div class="custom-block tip"><p class="custom-block-title">DEFINITION</p> <p>üìñ <strong>Term</strong></p> <p>Code coverage is a measure of how much of your code is executed when running tests. It helps you determine how thoroughlyyour tests exercise your code, and helps you identify areas of your code that may not be fully tested. By ensuring that your tests have high code coverage, you can improve the quality and reliability of your software.</p></div> <p>Currently, we have two types of tests in our room-finder project: unit tests (using the react testing library running jest) and integration tests (running on Cypress). Let's consider how we can generate coverage reports for both of our testing scenarios:</p> <h3 id="jest-code-coverage"><a href="#jest-code-coverage" class="header-anchor">#</a> Jest Code Coverage</h3> <p>To check code coverage using Jest, you need to use the --coverage flag when running your Jest tests. For example:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npx jest --coverage --collectCoverageFrom=&quot;./src/**&quot;

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Running the above command will generate a coverage report that looks something like this:</p> <p><img src="/devops_2022_2023_notes/assets/img/coverage_report.aa5bd531.png" alt=""></p> <p>Personally, I don't find the above coverage format that useful. A better approach is to generate a coverage report like this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npx jest --coverage --collectCoverageFrom=&quot;./src/**&quot; --coverageD directory='coverage'

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Now, you will see an interactive coverage report, in <code>/coverage/lcov-report/index.html</code> that resembles this:</p> <p><img src="/devops_2022_2023_notes/assets/img/interactive-coverage-report.e20b9666.png" alt=""></p> <blockquote><blockquote><p>A interactive coverage report; this would look much better in the appendix of your report!</p></blockquote></blockquote> <p>Hmm, 44 of 313 lines of code are tested: not great! We better look at our Cypress coverage report.</p> <h3 id="cypress-code-coverage"><a href="#cypress-code-coverage" class="header-anchor">#</a> Cypress Code Coverage</h3> <p><a href="https://docs.cypress.io/guides/tooling/code-coverage#Instrumenting-code" target="_blank" rel="noopener noreferrer">According to the Cypress documentation, in order to generate a coverage report, we must first instrument our code.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Code instrumentation provides us with information about the sections of code that are invoked when tests are run. Cypress is unopinionated about how we instrument our code. However, Istanbul is considered to be the industry standard JavaScript instrumentation tool. With this in mind, let's consider how to integrate Instanbul with Cypress.</p> <p>First, install the Cypress Coverage and Istanbul dependencies by running:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>
<span class="token function">npm</span> <span class="token function">install</span> -D  babel-plugin-istanbul @cypress/code-coverage


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Next, create a <code>.babelrc</code> file in the root of your project, and add the following code:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token punctuation">{</span>
	 <span class="token string-property property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;next/babel&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	 <span class="token string-property property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;istanbul&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><blockquote><p><code>.babelrc</code></p></blockquote></blockquote> <p>We now need to update two of our cypress files: <code>cypress/support/e2e.js</code> and <code>cypress.config.ts</code>. Add the following code:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// cypress/support/e2e.ts</span>
<span class="token keyword">import</span> <span class="token string">'@cypress/code-coverage/support'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><blockquote><p><code>cypress/support/e2e.ts</code></p></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// cypress.config.ts</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cypress'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// setupNodeEvents can be defined in either</span>
  <span class="token comment">// the e2e or component configuration</span>
  <span class="token literal-property property">e2e</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">setupNodeEvents</span><span class="token punctuation">(</span><span class="token parameter">on<span class="token punctuation">,</span> config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@cypress/code-coverage/task'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>on<span class="token punctuation">,</span> config<span class="token punctuation">)</span>
      <span class="token comment">// include any other plugin code...</span>
      
      <span class="token comment">// It's IMPORTANT to return the config object</span>
      <span class="token comment">// with any changed environment variables</span>
      <span class="token keyword">return</span> config
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><blockquote><blockquote><p><code>cypress.config.ts</code></p></blockquote></blockquote> <p>Now if you run cypress (<code>npm run test</code> and then  <code>npm run cypress:run</code>), you should get an updated coverage report in: <code>/coverage/lcov-report/index.html</code>.  As you can see, our coverage is now around 85%, much better:</p> <p><img src="/devops_2022_2023_notes/assets/img/cypress-coverage.593d5fc0.png" alt=""></p> <blockquote><blockquote><p>updated coverage report: notice how <code>@cypress-coverage</code> is more focused, meaning there are less lines of code analysed</p></blockquote></blockquote> <h3 id="task-1"><a href="#task-1" class="header-anchor">#</a> Task 1</h3> <p>Using the notes above, set up test coverage in our room-finder application.</p> <h2 id="logging"><a href="#logging" class="header-anchor">#</a> Logging</h2> <p>Currently, there is no way of knowing if our production application has crashed! As such, we need a  logging solution that helps us diagnose and monitor application issues.</p> <p><a href="sentry.io">I recommend using Sentry</a>.  Sentry is a platform that helps developers monitor and fixes errors in their applications in real time. It is often used to detect and report errors, as well as track the performance of an application and identify potential issues. This can help developers quickly identify and fix problems, ensuring that their applications are stable and running smoothly.</p> <p>Sentry's SDK hooks into your runtime environment and automatically reports errors, uncaught exceptions, and unhandled rejections as well as other types of errors depending on the platform.</p> <h2 id="task-2-configure-sentry-in-your-room-finder-application"><a href="#task-2-configure-sentry-in-your-room-finder-application" class="header-anchor">#</a> Task 2: Configure Sentry in Your Room Finder Application</h2> <p>Put simply, the Sentry documentation is excellent and walks you through the installation process. For this task, sign up to a <a href="sentry.io">sentry.io</a> account and follow through the installation instructions for a Next.js application.</p> <p>Once you have Sentry set up, you may want to add some further context to your errors. <a href="https://docs.sentry.io/platforms/javascript/guides/react/enriching-events/identify-user/" target="_blank" rel="noopener noreferrer">See if you can figure out how to append the logged in user's details to the error<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="analytics"><a href="#analytics" class="header-anchor">#</a> Analytics</h2> <p>Finally, I want to consider analytics. You should include some form of analytics solution in your assessment. Analytics allow you to understand how users are interacting with your web application. I recommend considering Google analytics Combined with HotJar.</p> <p>Google Analytics is a free web analytics service offered by Google that tracks and reports website traffic.
Hotjar is a tool that provides website and user analytics, as well as feedback and survey tools. It allows you to see how users are interacting with your website by visually representing their clicks, taps, and scrolling behaviour. This can help you identify problem areas and improve the overall user experience of your website.</p> <p>https://mariestarck.com/add-google-analytics-to-your-next-js-application-in-5-easy-steps/</p> <h2 id="task-3-installing-analytics"><a href="#task-3-installing-analytics" class="header-anchor">#</a> Task 3: Installing Analytics</h2> <p>Install analytics on our room finder application. I reccomend you use the following tutorials:</p> <p><a href="https://medium.com/@romansorin/using-hotjar-and-google-analytics-with-next-js-to-track-behavior-a2283d659767" target="_blank" rel="noopener noreferrer">Google Analytics and HotJar Install<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="the-end"><a href="#the-end" class="header-anchor">#</a> THE END</h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/devops_2022_2023_notes/week-10/lecture.html" class="prev">
        Lecture
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/devops_2022_2023_notes/assets/js/app.dbdd3740.js" defer></script><script src="/devops_2022_2023_notes/assets/js/2.28c99d85.js" defer></script><script src="/devops_2022_2023_notes/assets/js/6.ab9babc7.js" defer></script>
  </body>
</html>
